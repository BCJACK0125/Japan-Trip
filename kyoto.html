<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é—œè¥¿ä¹‹æ—…å°åŠ©æ‰‹ 2026</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #2F4F4F;
            --primary-light: #4A6D6D; 
            --accent: #FF6B6B;
            --bg: #F5F5F5;
            --card-bg: #FFFFFF;
            --text-main: #333333;
            --text-sub: #666666;
            --line: #E0E0E0;
            --tag-eat: #FFF0F0; --text-eat: #D32F2F;
            --tag-buy: #F3E5F5; --text-buy: #7B1FA2;
            --tag-book: #E3F2FD; --text-book: #1976D2;
            --tag-must: #FFF3E0; --text-must: #E65100;
            --type-spot: #00897B; --type-food: #FF9800; --type-transport: #78909C; --type-shop: #8E24AA;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            margin: 0; padding: 0;
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
            background-color: var(--bg);
            color: var(--text-main);
            padding-bottom: 80px;
            background-image: radial-gradient(#E0E0E0 1px, transparent 1px);
            background-size: 20px 20px;
        }

        /* --- é ‚éƒ¨å°èˆª --- */
        .sticky-header { position: sticky; top: 0; z-index: 1000; background-color: var(--primary); }
        header { padding: 15px 16px 10px 16px; color: white; }
        header h1 { font-size: 18px; margin: 0; letter-spacing: 1px; }

        .day-selector {
            display: flex; overflow-x: auto; background: var(--primary-light);
            padding: 0 8px; gap: 8px; scrollbar-width: none;
        }
        .day-selector::-webkit-scrollbar { display: none; }
        .day-tab {
            flex: 0 0 auto; padding: 10px 15px; color: rgba(255,255,255,0.7);
            font-size: 13px; font-weight: 600; text-align: center; border-bottom: 3px solid transparent;
        }
        .day-tab.active { color: white; border-bottom: 3px solid var(--accent); background: rgba(255,255,255,0.1); }

        .container { max-width: 600px; margin: 0 auto; padding: 16px; }

        /* --- è¡Œç¨‹å¡ç‰‡ --- */
        .view-section { display: none; }
        .view-section.active { display: block; }

        .day-summary {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 16px; background: white; padding: 12px;
            border-radius: 10px; border-left: 5px solid var(--accent); box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .item-card { background: var(--card-bg); border-radius: 12px; margin-bottom: 16px; box-shadow: 0 2px 6px rgba(0,0,0,0.05); overflow: hidden; }
        .card-top-strip { height: 6px; width: 100%; }
        .strip-spot { background: var(--type-spot); }
        .strip-food { background: var(--type-food); }
        .strip-transport { background: var(--type-transport); }
        .strip-shop { background: var(--type-shop); }
        .strip-hotel { background: #333; }

        .card-body { padding: 16px; }
        .card-meta { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 12px; color: var(--text-sub); font-weight: 600; }
        .card-title { font-size: 17px; font-weight: 700; margin-bottom: 8px; color: var(--primary); }
        .card-tags { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 10px; }
        .tag { font-size: 11px; padding: 3px 7px; border-radius: 4px; font-weight: 600; }
        .tag-eat { background: var(--tag-eat); color: var(--text-eat); }
        .tag-buy { background: var(--tag-buy); color: var(--text-buy); }
        .tag-book { background: var(--tag-book); color: var(--text-book); }
        .tag-must { background: var(--tag-must); color: var(--text-must); }
        
        .card-info { font-size: 14px; color: var(--text-main); line-height: 1.5; margin-bottom: 12px; }
        .card-footer { display: flex; justify-content: space-between; align-items: center; border-top: 1px solid var(--bg); padding-top: 12px; }
        .btn-nav { background: var(--primary); color: white; border: none; padding: 8px 16px; border-radius: 20px; font-size: 13px; font-weight: 600; text-decoration: none; }
        
        .story-box { background: #fdfdfd; padding: 12px; border-radius: 8px; margin-top: 10px; font-size: 13px; border-left: 3px solid var(--accent); display: none; color: #555; line-height: 1.6; }
        .story-toggle { color: var(--primary); font-size: 12px; font-weight: 700; cursor: pointer; margin-top: 8px; display: inline-block; text-decoration: underline; }

        /* --- å·¥å…·ç®±å¡ç‰‡ --- */
        .tool-card { background: white; padding: 16px; border-radius: 12px; margin-bottom: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
        .info-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #f0f0f0; font-size: 14px; }
        .info-row:last-child { border-bottom: none; }

        /* --- åº•éƒ¨å°èˆª --- */
        .bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; background: white; border-top: 1px solid var(--line); display: flex; height: 65px; z-index: 2000; padding-bottom: env(safe-area-inset-bottom); }
        .nav-item { flex: 1; text-align: center; font-size: 11px; padding: 10px 0; color: var(--text-sub); }
        .nav-item.active { color: var(--primary); font-weight: 700; }
        .nav-icon { font-size: 22px; display: block; margin-bottom: 2px; }
    </style>
</head>
<body>

    <div class="sticky-header" id="main-header">
        <header>
            <h1>ğŸŒ¸ 2026 äº¬é˜ªä¹‹æ—…</h1>
        </header>
        <div class="day-selector" id="day-tabs"></div>
    </div>

    <div id="itinerary-view" class="view-section active container">
        <div id="day-content"></div>
    </div>

    <div id="tools-view" class="view-section container">
        <div class="tool-card">
            <h3 style="color:var(--primary); margin:0 0 12px 0; font-size:16px;">âœˆï¸ èˆªç­è©³ç´°è³‡è¨Š (AirAsia X)</h3>
            <div class="info-row"><span>å»ç¨‹ D7378</span><span>15:40 TPE â†’ 19:20 KIX</span></div>
            <div class="info-row"><span>å›ç¨‹ D7379</span><span>20:45 KIX â†’ 22:45 TPE</span></div>
            <div style="font-size:12px; color:var(--text-sub); margin-top:8px; line-height:1.4;">
                * æŠµé”é—œè¥¿æ©Ÿå ´ç¬¬ä¸€èˆªå»ˆ (T1)<br>
                * å›ç¨‹æ«ƒæª¯ï¼šT1 èˆªå»ˆ H å€ (é è¨ˆ)
            </div>
        </div>

        <div class="tool-card">
            <h3 style="color:var(--primary); margin:0 0 12px 0; font-size:16px;">ğŸ¨ ä½å®¿è©³ç´°è³‡è¨Š</h3>
            <div style="margin-bottom:15px; border-bottom:1px solid #eee; padding-bottom:10px;">
                <div style="font-weight:700; color:var(--primary);">äº¬éƒ½ï¼šCheck In å››æ¢çƒä¸¸</div>
                <div style="font-size:13px; margin:4px 0;">ğŸ“ äº¬éƒ½å¸‚ä¸­äº¬å€çƒä¸¸é€šéŒ¦å°è·¯ä¸Šãƒ«æ‰‹æ´—æ°´ç”º 652</div>
                <div style="font-size:12px; color:var(--accent);">åœ°ä¸‹éµã€Œå››æ¢ç«™ã€21è™Ÿå‡ºå£æ­¥è¡Œ 2 åˆ†</div>
            </div>
            <div>
                <div style="font-weight:700; color:var(--primary);">å¤§é˜ªï¼šHotel Hillarys å¿ƒé½‹æ©‹</div>
                <div style="font-size:13px; margin:4px 0;">ğŸ“ å¤§é˜ªå¸‚ä¸­å¤®å€æ±å¿ƒé½‹æ©‹ 1-17-11</div>
                <div style="font-size:12px; color:var(--accent);">ã€Œå¿ƒé½‹æ©‹ç«™ã€6 è™Ÿå‡ºå£ï¼Œé™„è¨­é ‚æ¨“å¤§æµ´å ´</div>
            </div>
        </div>

        <div class="tool-card">
            <h3 style="color:var(--primary); margin:0 0 12px 0; font-size:16px; display:flex; justify-content:space-between;">
                ğŸ’° é ç®—èˆ‡è¨˜å¸³ <span id="total-display" style="color:var(--accent);">NT$ 0</span>
            </h3>
            <div style="display:flex; flex-direction:column; gap:10px; background:#f9f9f9; padding:12px; border-radius:8px;">
                <input type="text" id="exp-name" placeholder="é …ç›®å…§å®¹" style="padding:12px; border:1px solid #ddd; border-radius:6px; font-size:16px;">
                <div style="display:flex; gap:8px;">
                    <input type="number" id="exp-amt" placeholder="é‡‘é¡" style="flex:2; padding:12px; border:1px solid #ddd; border-radius:6px; font-size:16px;">
                    <select id="exp-unit" style="flex:1.2; padding:12px; border:1px solid #ddd; border-radius:6px; background:white;">
                        <option value="JPY">æ—¥åœ“ (Â¥)</option>
                        <option value="TWD">å°å¹£ ($)</option>
                    </select>
                    <button onclick="addExp()" style="flex:1; background:var(--primary); color:white; border:none; border-radius:6px; font-weight:bold; font-size:20px;">+</button>
                </div>
            </div>
            <div id="expense-list" style="margin-top:15px;"></div>
        </div>
    </div>

    <nav class="bottom-nav">
        <div class="nav-item active" onclick="showMainTab('itinerary')">
            <span class="nav-icon">ğŸ—“ï¸</span>è¡Œç¨‹
        </div>
        <div class="nav-item" onclick="showMainTab('tools')">
            <span class="nav-icon">ğŸ§°</span>å·¥å…·ç®±
        </div>
    </nav>

    <script>
        const itinerary = [
            { date: "4/16", weekday: "ä¸‰", dayNum: "Day 1", weather: "â˜ï¸ 18Â°C", items: [
                { time: "19:20", type: "transport", title: "æŠµé”é—œè¥¿æ©Ÿå ´ (KIX)", detail: "ç¬¬ä¸€èˆªå»ˆè½åœ°ã€‚æå‰å¡«å¦¥ Visit Japan Web æƒç¢¼å…¥å¢ƒã€‚", cost: "", address: "Kansai International Airport", tags: [] },
                { time: "20:44", type: "transport", title: "JR Haruka ç‰¹æ€¥", detail: "4 è™Ÿæœˆå°ç™¼è»Šï¼Œç›´é”äº¬éƒ½è»Šç«™ã€‚Klook è²·ç¥¨ç¶ è‰²æ©Ÿå°å…Œæ›ã€‚", cost: "Â¥2,420", address: "Kansai Airport Station", tags: ["é ç´„"] },
                { time: "22:30", type: "hotel", title: "äº¬éƒ½é£¯åº—è¾¦ç†å…¥ä½", detail: "CheckIn Hotel å››æ¢çƒä¸¸ã€‚1F æœ‰ Lawsonã€‚", cost: "", address: "CheckIn Hotel Shijo Karasuma", tags: [] }
            ]},
            { date: "4/17", weekday: "å››", dayNum: "Day 2", weather: "ğŸŒ¤ï¸ 20Â°C", items: [
                { time: "07:30", type: "spot", title: "ä¼è¦‹ç¨»è·å¤§ç¤¾", detail: "é¿é–‹äººæ½®ï¼Œç¨äº«åƒæœ¬é³¥å±…ã€‚å»ºè­°æ‹å®Œç©ºæ™¯å¾Œå‰å¾€æ¸…æ°´å¯ºã€‚", cost: "å…è²»", address: "Fushimi Inari Taisha", tags: ["å¿…çœ‹"], story: "é€™è£¡æ˜¯å…¨æ—¥æœ¬ç¨»è·ç¥ç¤¾ç¸½æœ¬å®®ï¼Œåƒæœ¬é³¥å±…ç”±ä¿¡å¾’æè´ˆï¼Œå»ºè­°æ¸…æ™¨æŠµé”å¯æ‹åˆ°å¤¢å¹»ç©ºæ™¯ã€‚" },
                { time: "10:00", type: "spot", title: "æ¸…æ°´å¯º", detail: "å·¡éŠæ¸…æ°´èˆå°èˆ‡éŸ³ç¾½ä¹‹ç€§ã€‚äºŒå¹´å‚æ•£ç­–ã€‚", cost: "Â¥500", address: "Kiyomizu-dera", tags: ["å¿…çœ‹"] },
                { time: "14:00", type: "food", title: "éŒ¦å¸‚å ´", detail: "äº¬éƒ½äººçš„å»šæˆ¿ã€‚æ¨è–¦è±†ä¹³ç”œç”œåœˆã€‚", cost: "Â¥2,000", address: "Nishiki Market", tags: ["å¿…åƒ"] },
                { time: "19:30", type: "food", title: "æ»¿å¤©ä¸²ç‡’ (å…ˆæ–—ç”º)", detail: "é´¨å·æ—æ¥µå…·æ°£æ°›ã€‚å¿…é»é›è‚‰ä¸¸ã€é›çš®ä¸²ã€‚", cost: "Â¥4,000", address: "Manten Pontocho", tags: ["å¿…é»", "é ç´„"] }
            ]},
            { date: "4/18", weekday: "äº”", dayNum: "Day 3", weather: "â˜ï¸ 19Â°C", items: [
                { time: "09:02", type: "spot", title: "åµå±±å°ç«è»Š (é¾œå²¡ç«™)", detail: "çœ‹ä¿æ´¥å·å³½è°·é¢¨æ™¯ã€‚å®˜ç¶²æå‰è¨‚ç¥¨ï¼Œæ¨é›™æ•¸åº§ã€‚", cost: "Â¥880", address: "Kameoka Station", tags: ["é ç´„"], story: "è³æ¥“/æ«»åæ‰€ã€‚å¦‚æœæ˜¯é€±æœ«ï¼Œè«‹å‹™å¿…åœ¨ä¸€å€‹æœˆå‰é–‹æ¶ç¥¨åˆ¸ã€‚" },
                { time: "11:30", type: "spot", title: "åµå±±ç«¹æ—å°å¾‘", detail: "ç¶“å…¸é›»å½±å ´æ™¯ï¼Œæ„Ÿå—ç¿ ç¶ ç«¹æ—ã€‚é„°è¿‘å¾¡é«®ç¥ç¤¾ã€‚", cost: "å…è²»", address: "Arashiyama Bamboo Grove", tags: ["å¿…çœ‹"] },
                { time: "13:00", type: "food", title: "åµå±±å•†æ¥­è¡—/Miffy", detail: "åƒé™å®šç´…è±†éºµåŒ…ï¼Œè²·ä¼´æ‰‹ç¦®ã€‚", cost: "Â¥2,000", address: "Miffy Sakura Bakery", tags: ["å¿…è²·"] }
            ]},
            { date: "4/19", weekday: "å…­", dayNum: "Day 4", weather: "â˜€ï¸ 21Â°C", items: [
                { time: "08:30", type: "spot", title: "å®‡æ²» å¹³ç­‰é™¢", detail: "åƒå¹´é³³å‡°å ‚ï¼Œæ˜ ç…§æ± æ°´ç¾æ™¯ã€‚", cost: "Â¥700", address: "Byodoin", tags: ["å¿…çœ‹"] },
                { time: "11:30", type: "food", title: "ä¸­æ‘è—¤å‰ æœ¬åº—", detail: "æŠ¹èŒ¶æ§å¿…æœè–ã€‚å¿…é»ç«¹ç­’æŠ¹èŒ¶å†°æ·‡æ·‹ã€‚", cost: "Â¥3,000", address: "Nakamura Tokichi", tags: ["å¿…åƒ"] },
                { time: "14:30", type: "spot", title: "å¥ˆè‰¯å…¬åœ’", detail: "è²·é¹¿ä»™è²èˆ‡é¹¿äº’å‹•ã€‚å°å¿ƒé¹¿ç¾¤åŒ…åœï¼", cost: "Â¥200", address: "Nara Park", tags: ["å¿…åƒ"] },
                { time: "20:00", type: "hotel", title: "å¤§é˜ªé£¯åº— Check-in", detail: "Hotel Hillarys å¿ƒé½‹æ©‹ã€‚å»é ‚æ¨“æ³¡å¤§æµ´å ´ã€‚", cost: "", address: "Hotel Hillarys Shinsaibashi", tags: [] }
            ]},
            { date: "4/20", weekday: "æ—¥", dayNum: "Day 5", weather: "ğŸŒ¤ï¸ 22Â°C", items: [
                { time: "10:45", type: "spot", title: "å‹å°¾å¯º", detail: "æ»¿å±±æ»¿è°·ä¸å€’ç¿ï¼Œæ±‚å‹é‹åæ‰€ã€‚", cost: "Â¥500", address: "Katsuo-ji", tags: ["å¿…çœ‹", "å¿…è²·"] },
                { time: "14:00", type: "spot", title: "ç®•é¢å¤§ç€‘å¸ƒ", detail: "æ£®æ—æµ´æ•£æ­¥ã€‚å¿…åƒç‚¸æ¥“è‘‰ã€‚", cost: "å…è²»", address: "Minoh Waterfall", tags: ["å¿…åƒ"] },
                { time: "18:00", type: "shop", title: "å¿ƒé½‹æ©‹/é“é “å €", detail: "è—¥å¦æ¡è²·ã€å›ºåŠ›æœéœ“è™¹ç‡ˆæ‹ç…§ã€‚", cost: "", address: "Dotonbori", tags: ["å¿…çœ‹"] }
            ]},
            { date: "4/21", weekday: "ä¸€", dayNum: "Day 6", weather: "â˜€ï¸ 23Â°C", items: [
                { time: "09:00", type: "spot", title: "å¤§é˜ªåŸå¤©å®ˆé–£", detail: "å¤§é˜ªåœ°æ¨™ï¼Œå®å‰å£¯è§€ã€‚", cost: "Â¥600", address: "Osaka Castle", tags: ["å¿…çœ‹"] },
                { time: "12:00", type: "food", title: "é»‘é–€å¸‚å ´", detail: "é«˜å“è³ªæµ·é®®ã€ç¥æˆ¶ç‰›ç¾ç…ã€‚", cost: "Â¥4,000", address: "Kuromon Market", tags: ["å¿…åƒ"] },
                { time: "18:00", type: "spot", title: "æ¢…ç”°ç©ºä¸­åº­åœ’", detail: "éœ²å¤©å±•æœ›å°çœ‹å¤§é˜ªå¤œæ™¯ã€‚", cost: "Â¥1,500", address: "Umeda Sky Building", tags: ["å¿…çœ‹"] }
            ]},
            { date: "4/22", weekday: "äºŒ", dayNum: "Day 7", weather: "â˜ï¸ 20Â°C", items: [
                { time: "10:00", type: "shop", title: "å¿ƒé½‹æ©‹æœ€å¾Œè³¼ç‰©", detail: "Parco/å¤§ä¸¸ç™¾è²¨è£œè²¨ã€‚", cost: "", address: "Shinsaibashi Parco", tags: ["å¿…åƒ"] },
                { time: "15:00", type: "shop", title: "è‡¨ç©ºåŸ Outlet", detail: "å›æ©Ÿå‰æœ€å¾Œå¤§æ¡è²·ï¼Œé‹å‹•å“ç‰Œæ¥µå„ªæƒ ã€‚", cost: "", address: "Rinku Outlet", tags: ["å¿…è²·"] },
                { time: "20:55", type: "transport", title: "å›ç¨‹èˆªç­èµ·é£›", detail: "é—œè¥¿æ©Ÿå ´ D7379 å¾€å°åŒ—ã€‚", cost: "", address: "Kansai International Airport", tags: [] }
            ]}
        ];

        let expenses = [];
        const JPY_TO_TWD = 0.22;

        function init() {
            const tabContainer = document.getElementById('day-tabs');
            tabContainer.innerHTML = itinerary.map((day, i) => `
                <div class="day-tab ${i === 0 ? 'active' : ''}" onclick="switchDay(${i})">
                    ${day.date}<br>${day.dayNum}
                </div>
            `).join('');
            renderDay(0);
        }

        function switchDay(index) {
            document.querySelectorAll('.day-tab').forEach((t, i) => t.classList.toggle('active', i === index));
            renderDay(index);
            window.scrollTo(0, 0);
        }

        function renderDay(index) {
            const day = itinerary[index];
            let html = `<div class="day-summary"><div><strong>${day.dayNum}</strong> Â· ${day.date} (${day.weekday})</div><div style="font-size:12px;">${day.weather}</div></div>`;
            
            day.items.forEach(item => {
                let tags = item.tags.map(t => `<span class="tag ${t.includes('åƒ')?'tag-eat':t.includes('è²·')?'tag-buy':t.includes('é ç´„')?'tag-book':'tag-must'}">${t}</span>`).join('');
                html += `
                    <div class="item-card">
                        <div class="card-top-strip strip-${item.type}"></div>
                        <div class="card-body">
                            <div class="card-meta"><span>${item.time}</span><span>${item.type.toUpperCase()}</span></div>
                            <div class="card-title">${item.title}</div>
                            <div class="card-tags">${tags}</div>
                            <div class="card-info">${item.detail}</div>
                            ${item.story ? `<div class="story-toggle" onclick="this.nextElementSibling.style.display='block';this.style.display='none'">ğŸ“– é»æˆ‘çœ‹æ”»ç•¥æ•…äº‹</div><div class="story-box">${item.story}</div>` : ''}
                            <div class="card-footer">
                                <span style="font-weight:700;">${item.cost}</span>
                                <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(item.address)}" target="_blank" class="btn-nav">å°èˆª</a>
                            </div>
                        </div>
                    </div>
                `;
            });
            document.getElementById('day-content').innerHTML = html;
        }

        function showMainTab(tab) {
            document.getElementById('itinerary-view').classList.toggle('active', tab === 'itinerary');
            document.getElementById('tools-view').classList.toggle('active', tab === 'tools');
            document.getElementById('main-header').style.display = (tab === 'itinerary') ? 'block' : 'none';
            document.querySelectorAll('.nav-item').forEach((n, i) => n.classList.toggle('active', (tab === 'itinerary' && i === 0) || (tab === 'tools' && i === 1)));
        }

        function addExp() {
            const n = document.getElementById('exp-name'), a = document.getElementById('exp-amt'), u = document.getElementById('exp-unit');
            if(!n.value || !a.value) return;
            const amt = parseFloat(a.value);
            expenses.push({ id: Date.now(), name: n.value, amt: amt, unit: u.value, twd: u.value==='TWD'?amt:Math.round(amt*JPY_TO_TWD) });
            n.value=''; a.value=''; renderExp();
        }

        function renderExp() {
            const list = document.getElementById('expense-list');
            let total = 0;
            list.innerHTML = expenses.map(e => {
                total += e.twd;
                return `<div class="info-row"><div><b>${e.name}</b><br><small style="color:#888">${e.unit==='JPY'?'Â¥':'$'}${e.amt.toLocaleString()} â†’ NT$${e.twd}</small></div><button onclick="expenses=expenses.filter(x=>x.id!==${e.id});renderExp()" style="border:none;background:none;color:#ccc;">âœ•</button></div>`;
            }).reverse().join('');
            document.getElementById('total-display').innerText = `NT$ ${total.toLocaleString()}`;
        }

        window.onload = init;
    </script>
</body>
</html>